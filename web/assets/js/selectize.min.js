(function(a,b){if(typeof define==="function"&&define.amd){define("sifter",b)}else{if(typeof exports==="object"){module.exports=b()}else{a.Sifter=b()}}}(this,function(){var f=function(h,i){this.items=h;this.settings=i||{diacritics:true}};f.prototype.tokenize=function(l){l=b(String(l||"").toLowerCase());if(!l||!l.length){return[]}var h,p,k,j;var m=[];var o=l.split(/ +/);for(h=0,p=o.length;h<p;h++){k=c(o[h]);if(this.settings.diacritics){for(j in a){if(a.hasOwnProperty(j)){k=k.replace(new RegExp(j,"g"),a[j])}}}m.push({string:o[h],regex:new RegExp(k,"i")})}return m};f.prototype.iterator=function(h,j){var i;if(d(h)){i=Array.prototype.forEach||function(m){for(var k=0,l=this.length;k<l;k++){m(this[k],k,this)}}}else{i=function(l){for(var k in this){if(this.hasOwnProperty(k)){l(this[k],k,this)}}}}i.apply(h,[j])};f.prototype.getScoreFunction=function(m,k){var j,i,o,n;j=this;m=j.prepareSearch(m,k);o=m.tokens;i=m.options.fields;n=o.length;var h=function(q,p){var r,s;if(!q){return 0}q=String(q||"");s=q.search(p.regex);if(s===-1){return 0}r=p.string.length/q.length;if(s===0){r+=0.5}return r};var l=(function(){var p=i.length;if(!p){return function(){return 0}}if(p===1){return function(q,r){return h(r[i[0]],q)}}return function(r,t){for(var q=0,s=0;q<p;q++){s+=h(t[i[q]],r)}return s/p}})();if(!n){return function(){return 0}}if(n===1){return function(p){return l(o[0],p)}}if(m.options.conjunction==="and"){return function(r){var s;for(var p=0,q=0;p<n;p++){s=l(o[p],r);if(s<=0){return 0}q+=s}return q/n}}else{return function(r){for(var p=0,q=0;p<n;p++){q+=l(o[p],r)}return q/n}}};f.prototype.getSortFunction=function(u,v){var p,h,t,r,q,k,s,m,j,l,o;t=this;u=t.prepareSearch(u,v);o=(!u.query&&v.sort_empty)||v.sort;j=function(n,i){if(n==="$score"){return i.score}return t.items[i.id][n]};q=[];if(o){for(p=0,h=o.length;p<h;p++){if(u.query||o[p].field!=="$score"){q.push(o[p])}}}if(u.query){l=true;for(p=0,h=q.length;p<h;p++){if(q[p].field==="$score"){l=false;break}}if(l){q.unshift({field:"$score",direction:"desc"})}}else{for(p=0,h=q.length;p<h;p++){if(q[p].field==="$score"){q.splice(p,1);break}}}m=[];for(p=0,h=q.length;p<h;p++){m.push(q[p].direction==="desc"?-1:1)}k=q.length;if(!k){return null}else{if(k===1){r=q[0].field;s=m[0];return function(n,i){return s*e(j(r,n),j(r,i))}}else{return function(y,w){var A,n,x,z,B;for(A=0;A<k;A++){B=q[A].field;n=m[A]*e(j(B,y),j(B,w));if(n){return n}}return 0}}}};f.prototype.prepareSearch=function(k,h){if(typeof k==="object"){return k}h=g({},h);var j=h.fields;var l=h.sort;var i=h.sort_empty;if(j&&!d(j)){h.fields=[j]}if(l&&!d(l)){h.sort=[l]}if(i&&!d(i)){h.sort_empty=[i]}return{options:h,query:String(k||"").toLowerCase(),tokens:this.tokenize(k),total:0,items:[]}};f.prototype.search=function(k,p){var n=this,m,i,o,j;var h;var l;o=this.prepareSearch(k,p);p=o.options;k=o.query;l=p.score||n.getScoreFunction(o);if(k.length){n.iterator(n.items,function(q,r){i=l(q);if(p.filter===false||i>0){o.items.push({score:i,id:r})}})}else{n.iterator(n.items,function(q,r){o.items.push({score:1,id:r})})}h=n.getSortFunction(o,p);if(h){o.items.sort(h)}o.total=o.items.length;if(typeof p.limit==="number"){o.items=o.items.slice(0,p.limit)}return o};var e=function(i,h){if(typeof i==="number"&&typeof h==="number"){return i>h?1:(i<h?-1:0)}i=String(i||"").toLowerCase();h=String(h||"").toLowerCase();if(i>h){return 1}if(h>i){return -1}return 0};var g=function(j,h){var o,p,l,m;for(o=1,p=arguments.length;o<p;o++){m=arguments[o];if(!m){continue}for(l in m){if(m.hasOwnProperty(l)){j[l]=m[l]}}}return j};var b=function(h){return(h+"").replace(/^\s+|\s+$|/g,"")};var c=function(h){return(h+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")};var d=Array.isArray||($&&$.isArray)||function(h){return Object.prototype.toString.call(h)==="[object Array]"};var a={a:"[aÀÁÂÃÄÅàáâãäå]",c:"[cÇçćĆčČ]",d:"[dđĐ]",e:"[eÈÉÊËèéêë]",i:"[iÌÍÎÏìíîï]",n:"[nÑñ]",o:"[oÒÓÔÕÕÖØòóôõöø]",s:"[sŠš]",u:"[uÙÚÛÜùúûü]",y:"[yŸÿý]",z:"[zŽž]"};return f}));(function(a,b){if(typeof define==="function"&&define.amd){define("microplugin",b)}else{if(typeof exports==="object"){module.exports=b()}else{a.MicroPlugin=b()}}}(this,function(){var a={};a.mixin=function(c){c.plugins={};c.prototype.initializePlugins=function(e){var h,j,g;var f=this;var d=[];f.plugins={names:[],settings:{},requested:{},loaded:{}};if(b.isArray(e)){for(h=0,j=e.length;h<j;h++){if(typeof e[h]==="string"){d.push(e[h])}else{f.plugins.settings[e[h].name]=e[h].options;d.push(e[h].name)}}}else{if(e){for(g in e){if(e.hasOwnProperty(g)){f.plugins.settings[g]=e[g];d.push(g)}}}}while(d.length){f.require(d.shift())}};c.prototype.loadPlugin=function(f){var e=this;var d=e.plugins;var g=c.plugins[f];if(!c.plugins.hasOwnProperty(f)){throw new Error('Unable to find "'+f+'" plugin')}d.requested[f]=true;d.loaded[f]=g.fn.apply(e,[e.plugins.settings[f]||{}]);d.names.push(f)};c.prototype.require=function(f){var e=this;var d=e.plugins;if(!e.plugins.loaded.hasOwnProperty(f)){if(d.requested[f]){throw new Error('Plugin has circular dependency ("'+f+'")')}e.loadPlugin(f)}return d.loaded[f]};c.define=function(d,e){c.plugins[d]={name:d,fn:e}}};var b={isArray:Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"}};return a}));(function(a,b){if(typeof define==="function"&&define.amd){define("selectize",["jquery","sifter","microplugin"],b)}else{a.Selectize=b(a.jQuery,a.Sifter,a.MicroPlugin)}}(this,function(v,m,i){var I=function(L,O){if(typeof O==="string"&&!O.length){return}var N=(typeof O==="string")?new RegExp(O,"i"):O;var M=function(R){var X=0;if(R.nodeType===3){var W=R.data.search(N);if(W>=0&&R.data.length>0){var V=R.data.match(N);var U=document.createElement("span");U.className="highlight";var S=R.splitText(W);var P=S.splitText(V[0].length);var Q=S.cloneNode(true);U.appendChild(Q);S.parentNode.replaceChild(U,S);X=1}}else{if(R.nodeType===1&&R.childNodes&&!/(script|style)/i.test(R.tagName)){for(var T=0;T<R.childNodes.length;++T){T+=M(R.childNodes[T])}}}return X};return L.each(function(){M(this)})};var C=function(){};C.prototype={on:function(M,L){this._events=this._events||{};this._events[M]=this._events[M]||[];this._events[M].push(L)},off:function(M,L){var N=arguments.length;if(N===0){return delete this._events}if(N===1){return delete this._events[M]}this._events=this._events||{};if(M in this._events===false){return}this._events[M].splice(this._events[M].indexOf(L),1)},trigger:function(M){this._events=this._events||{};if(M in this._events===false){return}for(var L=0;L<this._events[M].length;L++){this._events[M][L].apply(this,Array.prototype.slice.call(arguments,1))}}};C.mixin=function(L){var N=["on","off","trigger"];for(var M=0;M<N.length;M++){L.prototype[N[M]]=C.prototype[N[M]]}};var c=/Mac/.test(navigator.userAgent);var E=65;var J=188;var y=13;var w=27;var p=37;var D=38;var t=39;var u=40;var n=8;var q=46;var j=16;var F=c?91:17;var e=c?18:17;var B=9;var k=1;var h=2;var K=function(L){return typeof L!=="undefined"};var x=function(L){if(typeof L==="undefined"||L===null){return""}if(typeof L==="boolean"){return L?"1":"0"}return L+""};var A=function(L){return(L+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var f=function(L){return(L+"").replace(/\$/g,"$$$$")};var s={};s.before=function(L,O,N){var M=L[O];L[O]=function(){N.apply(L,arguments);return M.apply(L,arguments)}};s.after=function(L,O,N){var M=L[O];L[O]=function(){var P=M.apply(L,arguments);N.apply(L,arguments);return P}};var a=function(M,O){if(!v.isArray(O)){return O}var L,P,N={};for(L=0,P=O.length;L<P;L++){if(O[L].hasOwnProperty(M)){N[O[L][M]]=O[L]}}return N};var r=function(L){var M=false;return function(){if(M){return}M=true;L.apply(this,arguments)}};var g=function(M,L){var N;return function(){var O=this;var P=arguments;window.clearTimeout(N);N=window.setTimeout(function(){M.apply(O,P)},L)}};var b=function(L,N,P){var O;var M=L.trigger;var Q={};L.trigger=function(){var R=arguments[0];if(N.indexOf(R)!==-1){Q[R]=arguments}else{return M.apply(L,arguments)}};P.apply(L,[]);L.trigger=M;for(O in Q){if(Q.hasOwnProperty(O)){M.apply(L,Q[O])}}};var z=function(O,N,L,M){O.on(N,L,function(P){var Q=P.target;while(Q&&Q.parentNode!==O[0]){Q=Q.parentNode}P.currentTarget=Q;return M.apply(this,[P])})};var l=function(N){var M={};if("selectionStart" in N){M.start=N.selectionStart;M.length=N.selectionEnd-M.start}else{if(document.selection){N.focus();var O=document.selection.createRange();var L=document.selection.createRange().text.length;O.moveStart("character",-N.value.length);M.start=O.text.length-L;M.length=L}}return M};var o=function(O,P,M){var L,Q,N={};if(M){for(L=0,Q=M.length;L<Q;L++){N[M[L]]=O.css(M[L])}}else{N=O.css()}P.css(N)};var G=function(O,N){var M=v("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(O).appendTo("body");o(N,M,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var L=M.width();M.remove();return L};var H=function(M){var L=function(Q){var U,V,R,T,N;var O,P,S;Q=Q||window.event||{};if(Q.metaKey||Q.altKey){return}if(M.data("grow")===false){return}U=M.val();if(Q.type&&Q.type.toLowerCase()==="keydown"){V=Q.keyCode;R=((V>=97&&V<=122)||(V>=65&&V<=90)||(V>=48&&V<=57)||V===32);if(V===q||V===n){S=l(M[0]);if(S.length){U=U.substring(0,S.start)+U.substring(S.start+S.length)}else{if(V===n&&S.start){U=U.substring(0,S.start-1)+U.substring(S.start+1)}else{if(V===q&&typeof S.start!=="undefined"){U=U.substring(0,S.start)+U.substring(S.start+1)}}}}else{if(R){O=Q.shiftKey;P=String.fromCharCode(Q.keyCode);if(O){P=P.toUpperCase()}else{P=P.toLowerCase()}U+=P}}}T=M.attr("placeholder")||"";if(!U.length&&T.length){U=T}N=G(U,M)+4;if(N!==M.width()){M.width(N);M.triggerHandler("resize")}};M.on("keydown keyup update blur",L);L()};var d=function(S,Q){var P,O,R,N,M,L=this;M=S[0];M.selectize=L;N=window.getComputedStyle?window.getComputedStyle(M,null).getPropertyValue("direction"):M.currentStyle&&M.currentStyle.direction;N=N||S.parents("[dir]:first").attr("dir")||"";v.extend(L,{settings:Q,$input:S,tagType:M.tagName.toLowerCase()==="select"?k:h,rtl:/rtl/i.test(N),eventNS:".selectize"+(++d.count),highlightedValue:null,isOpen:false,isDisabled:false,isRequired:S.is("[required]"),isInvalid:false,isLocked:false,isFocused:false,isInputHidden:false,isSetup:false,isShiftDown:false,isCmdDown:false,isCtrlDown:false,ignoreFocus:false,ignoreHover:false,hasOptions:false,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:g(L.onSearchChange,Q.loadThrottle)});L.sifter=new m(this.options,{diacritics:Q.diacritics});v.extend(L.options,a(Q.valueField,Q.options));delete L.settings.options;v.extend(L.optgroups,a(Q.optgroupValueField,Q.optgroups));delete L.settings.optgroups;L.settings.mode=L.settings.mode||(L.settings.maxItems===1?"single":"multi");if(typeof L.settings.hideSelected!=="boolean"){L.settings.hideSelected=L.settings.mode==="multi"}L.initializePlugins(L.settings.plugins);L.setupCallbacks();L.setupTemplates();L.setup()};C.mixin(d);i.mixin(d);v.extend(d.prototype,{setup:function(){var ab=this;var R=ab.settings;var M=ab.eventNS;var N=v(window);var S=v(document);var V;var Y;var Z;var W;var aa;var O;var L;var X;var P;var U;var Q;var T;L=ab.settings.mode;U=ab.$input.attr("tabindex")||"";Q=ab.$input.attr("class")||"";V=v("<div>").addClass(R.wrapperClass).addClass(Q).addClass(L);Y=v("<div>").addClass(R.inputClass).addClass("items").appendTo(V);Z=v('<input type="text" autocomplete="off">').appendTo(Y).attr("tabindex",U);O=v(R.dropdownParent||V);W=v("<div>").addClass(R.dropdownClass).addClass(Q).addClass(L).hide().appendTo(O);aa=v("<div>").addClass(R.dropdownContentClass).appendTo(W);V.css({width:ab.$input[0].style.width});if(ab.plugins.names.length){T="plugin-"+ab.plugins.names.join(" plugin-");V.addClass(T);W.addClass(T)}if((R.maxItems===null||R.maxItems>1)&&ab.tagType===k){ab.$input.attr("multiple","multiple")}if(ab.settings.placeholder){Z.attr("placeholder",R.placeholder)}ab.$wrapper=V;ab.$control=Y;ab.$control_input=Z;ab.$dropdown=W;ab.$dropdown_content=aa;W.on("mouseenter","[data-selectable]",function(){return ab.onOptionHover.apply(ab,arguments)});W.on("mousedown","[data-selectable]",function(){return ab.onOptionSelect.apply(ab,arguments)});z(Y,"mousedown","*:not(input)",function(){return ab.onItemSelect.apply(ab,arguments)});H(Z);Y.on({mousedown:function(){return ab.onMouseDown.apply(ab,arguments)},click:function(){return ab.onClick.apply(ab,arguments)}});Z.on({mousedown:function(ac){ac.stopPropagation()},keydown:function(){return ab.onKeyDown.apply(ab,arguments)},keyup:function(){return ab.onKeyUp.apply(ab,arguments)},keypress:function(){return ab.onKeyPress.apply(ab,arguments)},resize:function(){ab.positionDropdown.apply(ab,[])},blur:function(){return ab.onBlur.apply(ab,arguments)},focus:function(){return ab.onFocus.apply(ab,arguments)}});S.on("keydown"+M,function(ac){ab.isCmdDown=ac[c?"metaKey":"ctrlKey"];ab.isCtrlDown=ac[c?"altKey":"ctrlKey"];ab.isShiftDown=ac.shiftKey});S.on("keyup"+M,function(ac){if(ac.keyCode===e){ab.isCtrlDown=false}if(ac.keyCode===j){ab.isShiftDown=false}if(ac.keyCode===F){ab.isCmdDown=false}});S.on("mousedown"+M,function(ac){if(ab.isFocused){if(ac.target===ab.$dropdown[0]||ac.target.parentNode===ab.$dropdown[0]){return false}if(!ab.$control.has(ac.target).length&&ac.target!==ab.$control[0]){ab.blur()}}});N.on(["scroll"+M,"resize"+M].join(" "),function(){if(ab.isOpen){ab.positionDropdown.apply(ab,arguments)}});N.on("mousemove"+M,function(){ab.ignoreHover=false});this.revertSettings={$children:ab.$input.children().detach(),tabindex:ab.$input.attr("tabindex")};ab.$input.attr("tabindex",-1).hide().after(ab.$wrapper);if(v.isArray(R.items)){ab.setValue(R.items);delete R.items}if(ab.$input[0].validity){ab.$input.on("invalid"+M,function(ac){ac.preventDefault();ab.isInvalid=true;ab.refreshState()})}ab.updateOriginalInput();ab.refreshItems();ab.refreshState();ab.updatePlaceholder();ab.isSetup=true;if(ab.$input.is(":disabled")){ab.disable()}ab.on("change",this.onChange);ab.trigger("initialize");if(R.preload){ab.onSearchChange("")}},setupTemplates:function(){var M=this;var L=M.settings.labelField;var N=M.settings.optgroupLabelField;var O={optgroup:function(P){return'<div class="optgroup">'+P.html+"</div>"},optgroup_header:function(Q,P){return'<div class="optgroup-header">'+P(Q[N])+"</div>"},option:function(Q,P){return'<div class="option">'+P(Q[L])+"</div>"},item:function(Q,P){return'<div class="item">'+P(Q[L])+"</div>"},option_create:function(Q,P){return'<div class="create">Add <strong>'+P(Q.input)+"</strong>&hellip;</div>"}};M.settings.render=v.extend({},O,M.settings.render)},setupCallbacks:function(){var L,M,N={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType"};for(L in N){if(N.hasOwnProperty(L)){M=this.settings[N[L]];if(M){this.on(L,M)}}}},onClick:function(M){var L=this;if(!L.isFocused){L.focus();M.preventDefault()}},onMouseDown:function(O){var M=this;var N=O.isDefaultPrevented();var L=v(O.target);if(M.isFocused){if(O.target!==M.$control_input[0]){if(M.settings.mode==="single"){M.isOpen?M.close():M.open()}else{if(!N){M.setActiveItem(null)}}return false}}else{if(!N){window.setTimeout(function(){M.focus()},0)}}},onChange:function(){this.$input.trigger("change")},onKeyPress:function(M){if(this.isLocked){return M&&M.preventDefault()}var L=String.fromCharCode(M.keyCode||M.which);if(this.settings.create&&L===this.settings.delimiter){this.createItem();M.preventDefault();return false}},onKeyDown:function(P){var O=P.target===this.$control_input[0];var N=this;if(N.isLocked){if(P.keyCode!==B){P.preventDefault()}return}switch(P.keyCode){case E:if(N.isCmdDown){N.selectAll();return}break;case w:N.close();return;case u:if(!N.isOpen&&N.hasOptions){N.open()}else{if(N.$activeOption){N.ignoreHover=true;var L=N.getAdjacentOption(N.$activeOption,1);if(L.length){N.setActiveOption(L,true,true)}}}P.preventDefault();return;case D:if(N.$activeOption){N.ignoreHover=true;var M=N.getAdjacentOption(N.$activeOption,-1);if(M.length){N.setActiveOption(M,true,true)}}P.preventDefault();return;case y:if(N.isOpen&&N.$activeOption){N.onOptionSelect({currentTarget:N.$activeOption})}P.preventDefault();return;case p:N.advanceSelection(-1,P);return;case t:N.advanceSelection(1,P);return;case B:if(N.settings.create&&N.createItem()){P.preventDefault()}return;case n:case q:N.deleteSelection(P);return}if(N.isFull()||N.isInputHidden){P.preventDefault();return}},onKeyUp:function(N){var L=this;if(L.isLocked){return N&&N.preventDefault()}var M=L.$control_input.val()||"";if(L.lastValue!==M){L.lastValue=M;L.onSearchChange(M);L.refreshOptions();L.trigger("type",M)}},onSearchChange:function(N){var L=this;var M=L.settings.load;if(!M){return}if(L.loadedSearches.hasOwnProperty(N)){return}L.loadedSearches[N]=true;L.load(function(O){M.apply(L,[N,O])})},onFocus:function(M){var L=this;L.isFocused=true;if(L.isDisabled){L.blur();M&&M.preventDefault();return false}if(L.ignoreFocus){return}if(L.settings.preload==="focus"){L.onSearchChange("")}if(!L.$activeItems.length){L.showInput();L.setActiveItem(null);L.refreshOptions(!!L.settings.openOnFocus)}L.refreshState()},onBlur:function(M){var L=this;L.isFocused=false;if(L.ignoreFocus){return}if(L.settings.create&&L.settings.createOnBlur){L.createItem()}L.close();L.setTextboxValue("");L.setActiveItem(null);L.setActiveOption(null);L.setCaret(L.items.length);L.refreshState()},onOptionHover:function(L){if(this.ignoreHover){return}this.setActiveOption(L.currentTarget,false)},onOptionSelect:function(P){var N,L,O,M=this;if(P.preventDefault){P.preventDefault();P.stopPropagation()}L=v(P.currentTarget);if(L.hasClass("create")){M.createItem()}else{N=L.attr("data-value");if(N){M.lastQuery=null;M.setTextboxValue("");M.addItem(N);if(!M.settings.hideSelected&&P.type&&/mouse/.test(P.type)){M.setActiveOption(M.getOption(N))}}}},onItemSelect:function(M){var L=this;if(L.isLocked){return}if(L.settings.mode==="multi"){M.preventDefault();L.setActiveItem(M.currentTarget,M)}},load:function(M){var L=this;var N=L.$wrapper.addClass("loading");L.loading++;M.apply(L,[function(O){L.loading=Math.max(L.loading-1,0);if(O&&O.length){L.addOption(O);L.refreshOptions(L.isFocused&&!L.isInputHidden)}if(!L.loading){N.removeClass("loading")}L.trigger("load",O)}])},setTextboxValue:function(L){this.$control_input.val(L).triggerHandler("update");this.lastValue=L},getValue:function(){if(this.tagType===k&&this.$input.attr("multiple")){return this.items}else{return this.items.join(this.settings.delimiter)}},setValue:function(L){b(this,["change"],function(){this.clear();var M=v.isArray(L)?L:[L];for(var N=0,O=M.length;N<O;N++){this.addItem(M[N])}})},setActiveItem:function(S,Q){var V=this;var P;var O,T,L,N,U,M;var R;if(V.settings.mode==="single"){return}S=v(S);if(!S.length){v(V.$activeItems).removeClass("active");V.$activeItems=[];if(V.isFocused){V.showInput()}return}P=Q&&Q.type.toLowerCase();if(P==="mousedown"&&V.isShiftDown&&V.$activeItems.length){R=V.$control.children(".active:last");L=Array.prototype.indexOf.apply(V.$control[0].childNodes,[R[0]]);N=Array.prototype.indexOf.apply(V.$control[0].childNodes,[S[0]]);if(L>N){M=L;L=N;N=M}for(O=L;O<=N;O++){U=V.$control[0].childNodes[O];if(V.$activeItems.indexOf(U)===-1){v(U).addClass("active");V.$activeItems.push(U)}}Q.preventDefault()}else{if((P==="mousedown"&&V.isCtrlDown)||(P==="keydown"&&this.isShiftDown)){if(S.hasClass("active")){T=V.$activeItems.indexOf(S[0]);V.$activeItems.splice(T,1);S.removeClass("active")}else{V.$activeItems.push(S.addClass("active")[0])}}else{v(V.$activeItems).removeClass("active");V.$activeItems=[S.addClass("active")[0]]}}V.hideInput();if(!this.isFocused){V.focus()}},setActiveOption:function(L,R,N){var M,S,Q;var P,O;var T=this;if(T.$activeOption){T.$activeOption.removeClass("active")}T.$activeOption=null;L=v(L);if(!L.length){return}T.$activeOption=L.addClass("active");if(R||!K(R)){M=T.$dropdown_content.height();S=T.$activeOption.outerHeight(true);R=T.$dropdown_content.scrollTop()||0;Q=T.$activeOption.offset().top-T.$dropdown_content.offset().top+R;P=Q;O=Q-M+S;if(Q+S>M+R){T.$dropdown_content.stop().animate({scrollTop:O},N?T.settings.scrollDuration:0)}else{if(Q<R){T.$dropdown_content.stop().animate({scrollTop:P},N?T.settings.scrollDuration:0)}}}},selectAll:function(){var L=this;if(L.settings.mode==="single"){return}L.$activeItems=Array.prototype.slice.apply(L.$control.children(":not(input)").addClass("active"));if(L.$activeItems.length){L.hideInput();L.close()}L.focus()},hideInput:function(){var L=this;L.setTextboxValue("");L.$control_input.css({opacity:0,position:"absolute",left:L.rtl?10000:-10000});L.isInputHidden=true},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0});this.isInputHidden=false},focus:function(){var L=this;if(L.isDisabled){return}L.ignoreFocus=true;L.$control_input[0].focus();window.setTimeout(function(){L.ignoreFocus=false;L.onFocus()},0)},blur:function(){this.$control_input.trigger("blur")},getScoreFunction:function(L){return this.sifter.getScoreFunction(L,this.getSearchOptions())},getSearchOptions:function(){var M=this.settings;var L=M.sortField;if(typeof L==="string"){L={field:L}}return{fields:M.searchField,conjunction:M.searchConjunction,sort:L}},search:function(P){var O,Q,L,T,N;var R=this;var M=R.settings;var S=this.getSearchOptions();if(M.score){N=R.settings.score.apply(this,[P]);if(typeof N!=="function"){throw new Error('Selectize "score" setting must be a function that returns a function')}}if(P!==R.lastQuery){R.lastQuery=P;T=R.sifter.search(P,v.extend(S,{score:N}));R.currentResults=T}else{T=v.extend(true,{},R.currentResults)}if(M.hideSelected){for(O=T.items.length-1;O>=0;O--){if(R.items.indexOf(x(T.items[O].id))!==-1){T.items.splice(O,1)}}}return T},refreshOptions:function(V){var ac,ab,aa,Y,af,L,R,ad,N,Z,P,ae,Q;var O,U,W;if(typeof V==="undefined"){V=true}var T=this;var M=T.$control_input.val();var X=T.search(M);var S=T.$dropdown_content;var ag=T.$activeOption&&x(T.$activeOption.attr("data-value"));Y=X.items.length;if(typeof T.settings.maxOptions==="number"){Y=Math.min(Y,T.settings.maxOptions)}af={};if(T.settings.optgroupOrder){L=T.settings.optgroupOrder;for(ac=0;ac<L.length;ac++){af[L[ac]]=[]}}else{L=[]}for(ac=0;ac<Y;ac++){R=T.options[X.items[ac].id];ad=T.render("option",R);N=R[T.settings.optgroupField]||"";Z=v.isArray(N)?N:[N];for(ab=0,aa=Z&&Z.length;ab<aa;ab++){N=Z[ab];if(!T.optgroups.hasOwnProperty(N)){N=""}if(!af.hasOwnProperty(N)){af[N]=[];L.push(N)}af[N].push(ad)}}P=[];for(ac=0,Y=L.length;ac<Y;ac++){N=L[ac];if(T.optgroups.hasOwnProperty(N)&&af[N].length){ae=T.render("optgroup_header",T.optgroups[N])||"";ae+=af[N].join("");P.push(T.render("optgroup",v.extend({},T.optgroups[N],{html:ae})))}else{P.push(af[N].join(""))}}S.html(P.join(""));if(T.settings.highlight&&X.query.length&&X.tokens.length){for(ac=0,Y=X.tokens.length;ac<Y;ac++){I(S,X.tokens[ac].regex)}}if(!T.settings.hideSelected){for(ac=0,Y=T.items.length;ac<Y;ac++){T.getOption(T.items[ac]).addClass("selected")}}Q=T.settings.create&&X.query.length;if(Q){S.prepend(T.render("option_create",{input:M}));W=v(S[0].childNodes[0])}T.hasOptions=X.items.length>0||Q;if(T.hasOptions){if(X.items.length>0){U=ag&&T.getOption(ag);if(U&&U.length){O=U}else{if(T.settings.mode==="single"&&T.items.length){O=T.getOption(T.items[0])}}if(!O||!O.length){if(W&&!T.settings.addPrecedence){O=T.getAdjacentOption(W,1)}else{O=S.find("[data-selectable]:first")}}}else{O=W}T.setActiveOption(O);if(V&&!T.isOpen){T.open()}}else{T.setActiveOption(null);if(V&&T.isOpen){T.close()}}},addOption:function(P){var N,Q,M,O,L=this;if(v.isArray(P)){for(N=0,Q=P.length;N<Q;N++){L.addOption(P[N])}return}O=x(P[L.settings.valueField]);if(!O||L.options.hasOwnProperty(O)){return}L.userOptions[O]=true;L.options[O]=P;L.lastQuery=null;L.trigger("option_add",O,P)},addOptionGroup:function(M,L){this.optgroups[M]=L;this.trigger("optgroup_add",M,L)},updateOption:function(R,P){var T=this;var S,L;var N,O,Q,M;R=x(R);N=x(P[T.settings.valueField]);if(!T.options.hasOwnProperty(R)){return}if(!N){throw new Error("Value must be set in option data")}if(N!==R){delete T.options[R];O=T.items.indexOf(R);if(O!==-1){T.items.splice(O,1,N)}}T.options[N]=P;Q=T.renderCache.item;M=T.renderCache.option;if(K(Q)){delete Q[R];delete Q[N]}if(K(M)){delete M[R];delete M[N]}if(T.items.indexOf(N)!==-1){S=T.getItem(R);L=v(T.render("item",P));if(S.hasClass("active")){L.addClass("active")}S.replaceWith(L)}if(T.isOpen){T.refreshOptions(false)}},removeOption:function(M){var L=this;M=x(M);delete L.userOptions[M];delete L.options[M];L.lastQuery=null;L.trigger("option_remove",M);L.removeItem(M)},clearOptions:function(){var L=this;L.loadedSearches={};L.userOptions={};L.options=L.sifter.items={};L.lastQuery=null;L.trigger("option_clear");L.clear()},getOption:function(L){return this.getElementWithValue(L,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(O,N){var L=this.$dropdown.find("[data-selectable]");var M=L.index(O)+N;return M>=0&&M<L.length?L.eq(M):v()},getElementWithValue:function(N,M){N=x(N);if(N){for(var L=0,O=M.length;L<O;L++){if(M[L].getAttribute("data-value")===N){return v(M[L])}}}return v()},getItem:function(L){return this.getElementWithValue(L,this.$control.children())},addItem:function(L){b(this,["change"],function(){var N,S;var M=this;var T=M.settings.mode;var Q,R,P,O;L=x(L);if(M.items.indexOf(L)!==-1){if(T==="single"){M.close()}return}if(!M.options.hasOwnProperty(L)){return}if(T==="single"){M.clear()}if(T==="multi"&&M.isFull()){return}N=v(M.render("item",M.options[L]));M.items.splice(M.caretPos,0,L);M.insertAtCaret(N);M.refreshState();if(M.isSetup){P=M.$dropdown_content.find("[data-selectable]");S=M.getOption(L);O=M.getAdjacentOption(S,1).attr("data-value");M.refreshOptions(M.isFocused&&T!=="single");if(O){M.setActiveOption(M.getOption(O))}if(!P.length||(M.settings.maxItems!==null&&M.items.length>=M.settings.maxItems)){M.close()}else{M.positionDropdown()}M.updatePlaceholder();M.trigger("item_add",L,N);M.updateOriginalInput()}})},removeItem:function(P){var N=this;var M,O,L;M=(typeof P==="object")?P:N.getItem(P);P=x(M.attr("data-value"));O=N.items.indexOf(P);if(O!==-1){M.remove();if(M.hasClass("active")){L=N.$activeItems.indexOf(M[0]);N.$activeItems.splice(L,1)}N.items.splice(O,1);N.lastQuery=null;if(!N.settings.persist&&N.userOptions.hasOwnProperty(P)){N.removeOption(P)}if(O<N.caretPos){N.setCaret(N.caretPos-1)}N.refreshState();N.updatePlaceholder();N.updateOriginalInput();N.positionDropdown();N.trigger("item_remove",P)}},createItem:function(){var O=this;var N=v.trim(O.$control_input.val()||"");var Q=O.caretPos;if(!N.length){return false}O.lock();var L=(typeof O.settings.create==="function")?this.settings.create:function(R){var S={};S[O.settings.labelField]=R;S[O.settings.valueField]=R;return S};var P=r(function(S){O.unlock();if(!S||typeof S!=="object"){return}var R=x(S[O.settings.valueField]);if(!R){return}O.setTextboxValue("");O.addOption(S);O.setCaret(Q);O.addItem(R);O.refreshOptions(O.settings.mode!=="single")});var M=L.apply(this,[N,P]);if(typeof M!=="undefined"){P(M)}return true},refreshItems:function(){this.lastQuery=null;if(this.isSetup){for(var L=0;L<this.items.length;L++){this.addItem(this.items)}}this.refreshState();this.updateOriginalInput()},refreshState:function(){var L=this;var M=L.isRequired&&!L.items.length;if(!M){L.isInvalid=false}L.$control_input.prop("required",M);L.refreshClasses()},refreshClasses:function(){var L=this;var M=L.isFull();var N=L.isLocked;L.$wrapper.toggleClass("rtl",L.rtl);L.$control.toggleClass("focus",L.isFocused).toggleClass("disabled",L.isDisabled).toggleClass("required",L.isRequired).toggleClass("invalid",L.isInvalid).toggleClass("locked",N).toggleClass("full",M).toggleClass("not-full",!M).toggleClass("input-active",L.isFocused&&!L.isInputHidden).toggleClass("dropdown-active",L.isOpen).toggleClass("has-options",!v.isEmptyObject(L.options)).toggleClass("has-items",L.items.length>0);L.$control_input.data("grow",!M&&!N)},isFull:function(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(){var N,O,M,L=this;if(L.$input[0].tagName.toLowerCase()==="select"){M=[];for(N=0,O=L.items.length;N<O;N++){M.push('<option value="'+A(L.items[N])+'" selected="selected"></option>')}if(!M.length&&!this.$input.attr("multiple")){M.push('<option value="" selected="selected"></option>')}L.$input.html(M.join(""))}else{L.$input.val(L.getValue())}if(L.isSetup){L.trigger("change",L.$input.val())}},updatePlaceholder:function(){if(!this.settings.placeholder){return}var L=this.$control_input;if(this.items.length){L.removeAttr("placeholder")}else{L.attr("placeholder",this.settings.placeholder)}L.triggerHandler("update")},open:function(){var L=this;if(L.isLocked||L.isOpen||(L.settings.mode==="multi"&&L.isFull())){return}L.focus();L.isOpen=true;L.refreshState();L.$dropdown.css({visibility:"hidden",display:"block"});L.positionDropdown();L.$dropdown.css({visibility:"visible"});L.trigger("dropdown_open",L.$dropdown)},close:function(){var L=this;var M=L.isOpen;if(L.settings.mode==="single"&&L.items.length){L.hideInput()}L.isOpen=false;L.$dropdown.hide();L.setActiveOption(null);L.refreshState();if(M){L.trigger("dropdown_close",L.$dropdown)}},positionDropdown:function(){var L=this.$control;var M=this.settings.dropdownParent==="body"?L.offset():L.position();M.top+=L.outerHeight(true);this.$dropdown.css({width:L.outerWidth(),top:M.top,left:M.left})},clear:function(){var L=this;if(!L.items.length){return}L.$control.children(":not(input)").remove();L.items=[];L.setCaret(0);L.updatePlaceholder();L.updateOriginalInput();L.refreshState();L.showInput();L.trigger("clear")},insertAtCaret:function(L){var M=Math.min(this.caretPos,this.items.length);if(M===0){this.$control.prepend(L)}else{v(this.$control[0].childNodes[M]).before(L)}this.setCaret(M+1)},deleteSelection:function(O){var M,L,S,T,U,Q,P,R,N;var V=this;S=(O&&O.keyCode===n)?-1:1;T=l(V.$control_input[0]);if(V.$activeOption&&!V.settings.hideSelected){P=V.getAdjacentOption(V.$activeOption,-1).attr("data-value")}U=[];if(V.$activeItems.length){N=V.$control.children(".active:"+(S>0?"last":"first"));Q=V.$control.children(":not(input)").index(N);if(S>0){Q++}for(M=0,L=V.$activeItems.length;M<L;M++){U.push(v(V.$activeItems[M]).attr("data-value"))}if(O){O.preventDefault();O.stopPropagation()}}else{if((V.isFocused||V.settings.mode==="single")&&V.items.length){if(S<0&&T.start===0&&T.length===0){U.push(V.items[V.caretPos-1])}else{if(S>0&&T.start===V.$control_input.val().length){U.push(V.items[V.caretPos])}}}}if(!U.length||(typeof V.settings.onDelete==="function"&&V.settings.onDelete.apply(V,[U])===false)){return false}if(typeof Q!=="undefined"){V.setCaret(Q)}while(U.length){V.removeItem(U.pop())}V.showInput();V.positionDropdown();V.refreshOptions(true);if(P){R=V.getOption(P);if(R.length){V.setActiveOption(R)}}return true},advanceSelection:function(P,M){var N,Q,R,S,O,L;var T=this;if(P===0){return}if(T.rtl){P*=-1}N=P>0?"last":"first";Q=l(T.$control_input[0]);if(T.isFocused&&!T.isInputHidden){S=T.$control_input.val().length;O=P<0?Q.start===0&&Q.length===0:Q.start===S;if(O&&!S){T.advanceCaret(P,M)}}else{L=T.$control.children(".active:"+N);if(L.length){R=T.$control.children(":not(input)").index(L);T.setActiveItem(null);T.setCaret(P>0?R+1:R)}}},advanceCaret:function(P,O){var L=this,N,M;if(P===0){return}N=P>0?"next":"prev";if(L.isShiftDown){M=L.$control_input[N]();if(M.length){L.hideInput();L.setActiveItem(M);O&&O.preventDefault()}}else{L.setCaret(L.caretPos+P)}},setCaret:function(O){var M=this;if(M.settings.mode==="single"){O=M.items.length}else{O=Math.max(0,Math.min(M.items.length,O))}var N,R,P,L,Q;L=M.$control.children(":not(input)");for(N=0,R=L.length;N<R;N++){Q=v(L[N]).detach();if(N<O){M.$control_input.before(Q)}else{M.$control.append(Q)}}M.caretPos=O},lock:function(){this.close();this.isLocked=true;this.refreshState()},unlock:function(){this.isLocked=false;this.refreshState()},disable:function(){var L=this;L.$input.prop("disabled",true);L.isDisabled=true;L.lock()},enable:function(){var L=this;L.$input.prop("disabled",false);L.isDisabled=false;L.unlock()},destroy:function(){var L=this;var N=L.eventNS;var M=L.revertSettings;L.trigger("destroy");L.off();L.$wrapper.remove();L.$dropdown.remove();L.$input.html("").append(M.$children).removeAttr("tabindex").attr({tabindex:M.tabindex}).show();v(window).off(N);v(document).off(N);v(document.body).off(N);delete L.$input[0].selectize},render:function(T,N){var R,M,Q;var O="";var L=false;var S=this;var P=/^[\t ]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;if(T==="option"||T==="item"){R=x(N[S.settings.valueField]);L=!!R}if(L){if(!K(S.renderCache[T])){S.renderCache[T]={}}if(S.renderCache[T].hasOwnProperty(R)){return S.renderCache[T][R]}}O=S.settings.render[T].apply(this,[N,A]);if(T==="option"||T==="option_create"){O=O.replace(P,"<$1 data-selectable")}if(T==="optgroup"){M=N[S.settings.optgroupValueField]||"";O=O.replace(P,'<$1 data-group="'+f(A(M))+'"')}if(T==="option"||T==="item"){O=O.replace(P,'<$1 data-value="'+f(A(R||""))+'"')}if(L){S.renderCache[T][R]=O}return O}});d.count=0;d.defaults={plugins:[],delimiter:",",persist:true,diacritics:true,create:false,createOnBlur:false,highlight:true,openOnFocus:true,maxOptions:1000,maxItems:null,hideSelected:null,addPrecedence:false,preload:false,scrollDuration:60,loadThrottle:300,dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",optgroupOrder:null,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,render:{}};v.fn.selectize=function(R){var N=v.fn.selectize.defaults;var M=v.extend({},N,R);var O=M.dataAttr;var U=M.labelField;var V=M.valueField;var T=M.optgroupField;var P=M.optgroupLabelField;var Q=M.optgroupValueField;var L=function(ac,aa){var X,ab,W,Y,Z=v.trim(ac.val()||"");if(!Z.length){return}W=Z.split(M.delimiter);for(X=0,ab=W.length;X<ab;X++){Y={};Y[U]=W[X];Y[V]=W[X];aa.options[W[X]]=Y}aa.items=W};var S=function(ad,ab){var ac,Y,Z,af,aa=0;var ag=ab.options;var W=function(ah){var ai=O&&ah.attr(O);if(typeof ai==="string"&&ai.length){return JSON.parse(ai)}return null};var ae=function(ak,aj){var ai,ah;ak=v(ak);ai=ak.attr("value")||"";if(!ai.length){return}if(ag.hasOwnProperty(ai)){if(aj){if(!ag[ai].optgroup){ag[ai].optgroup=aj}else{if(!v.isArray(ag[ai].optgroup)){ag[ai].optgroup=[ag[ai].optgroup,aj]}else{ag[ai].optgroup.push(aj)}}}return}ah=W(ak)||{};ah[U]=ah[U]||ak.text();ah[V]=ah[V]||ai;ah[T]=ah[T]||aj;ah.$order=++aa;ag[ai]=ah;if(ak.is(":selected")){ab.items.push(ai)}};var X=function(ai){var ak,am,al,aj,ah;ai=v(ai);al=ai.attr("label");if(al){aj=W(ai)||{};aj[P]=al;aj[Q]=al;ab.optgroups[al]=aj}ah=v("option",ai);for(ak=0,am=ah.length;ak<am;ak++){ae(ah[ak],al)}};ab.maxItems=ad.attr("multiple")?null:1;af=ad.children();for(ac=0,Y=af.length;ac<Y;ac++){Z=af[ac].tagName.toLowerCase();if(Z==="optgroup"){X(af[ac])}else{if(Z==="option"){ae(af[ac])}}}};return this.each(function(){if(this.selectize){return}var W;var Z=v(this);var Y=this.tagName.toLowerCase();var X={placeholder:Z.children('option[value=""]').text()||Z.attr("placeholder"),options:{},optgroups:{},items:[]};if(Y==="select"){S(Z,X)}else{L(Z,X)}W=new d(Z,v.extend(true,{},N,X,R));Z.data("selectize",W);Z.addClass("selectized")})};v.fn.selectize.defaults=d.defaults;d.define("drag_drop",function(M){if(!v.fn.sortable){throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".')}if(this.settings.mode!=="multi"){return}var L=this;L.lock=(function(){var N=L.lock;return function(){var O=L.$control.data("sortable");if(O){O.disable()}return N.apply(L,arguments)}})();L.unlock=(function(){var N=L.unlock;return function(){var O=L.$control.data("sortable");if(O){O.enable()}return N.apply(L,arguments)}})();L.setup=(function(){var N=L.setup;return function(){N.apply(this,arguments);var O=L.$control.sortable({items:"[data-value]",forcePlaceholderSize:true,disabled:L.isLocked,start:function(Q,P){P.placeholder.css("width",P.helper.css("width"));O.css({overflow:"visible"})},stop:function(){O.css({overflow:"hidden"});var Q=L.$activeItems?L.$activeItems.slice():null;var P=[];O.children("[data-value]").each(function(){P.push(v(this).attr("data-value"))});L.setValue(P);L.setActiveItem(Q)}})}})()});d.define("dropdown_header",function(M){var L=this;M=v.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(N){return('<div class="'+N.headerClass+'"><div class="'+N.titleRowClass+'"><span class="'+N.labelClass+'">'+N.title+'</span><a href="javascript:void(0)" class="'+N.closeClass+'">&times;</a></div></div>')}},M);L.setup=(function(){var N=L.setup;return function(){N.apply(L,arguments);L.$dropdown_header=v(M.html(M));L.$dropdown.prepend(L.$dropdown_header)}})()});d.define("optgroup_columns",function(M){var L=this;M=v.extend({equalizeWidth:true,equalizeHeight:true},M);this.getAdjacentOption=function(R,Q){var O=R.closest("[data-group]").find("[data-selectable]");var P=O.index(R)+Q;return P>=0&&P<O.length?O.eq(P):v()};this.onKeyDown=(function(){var O=L.onKeyDown;return function(T){var R,S,P,Q;if(this.isOpen&&(T.keyCode===p||T.keyCode===t)){L.ignoreHover=true;Q=this.$activeOption.closest("[data-group]");R=Q.find("[data-selectable]").index(this.$activeOption);if(T.keyCode===p){Q=Q.prev("[data-group]")}else{Q=Q.next("[data-group]")}P=Q.find("[data-selectable]");S=P.eq(Math.min(P.length-1,R));if(S.length){this.setActiveOption(S)}return}return O.apply(this,arguments)}})();var N=function(){var P,U,O,Q,T,S,R;R=v("[data-group]",L.$dropdown_content);U=R.length;if(!U||!L.$dropdown_content.width()){return}if(M.equalizeHeight){O=0;for(P=0;P<U;P++){O=Math.max(O,R.eq(P).height())}R.css({height:O})}if(M.equalizeWidth){S=L.$dropdown_content.innerWidth();Q=Math.round(S/U);R.css({width:Q});if(U>1){T=S-Q*(U-1);R.eq(U-1).css({width:T})}}};if(M.equalizeHeight||M.equalizeWidth){s.after(this,"positionDropdown",N);s.after(this,"refreshOptions",N)}});d.define("remove_button",function(N){if(this.settings.mode==="single"){return}N=v.extend({label:"&times;",title:"Remove",className:"remove",append:true},N);var M=this;var O='<a href="javascript:void(0)" class="'+N.className+'" tabindex="-1" title="'+A(N.title)+'">'+N.label+"</a>";var L=function(P,Q){var R=P.search(/(<\/[^>]+>\s*)$/);return P.substring(0,R)+Q+P.substring(R)};this.setup=(function(){var P=M.setup;return function(){if(N.append){var Q=M.settings.render.item;M.settings.render.item=function(R){return L(Q.apply(this,arguments),O)}}P.apply(this,arguments);this.$control.on("click","."+N.className,function(S){S.preventDefault();if(M.isLocked){return}var R=v(S.target).parent();M.setActiveItem(R);if(M.deleteSelection()){M.setCaret(M.items.length)}})}})()});d.define("restore_on_backspace",function(M){var L=this;M.text=M.text||function(N){return N[this.settings.labelField]};this.onKeyDown=(function(O){var N=L.onKeyDown;return function(R){var P,Q;if(R.keyCode===n&&this.$control_input.val()===""&&!this.$activeItems.length){P=this.caretPos-1;if(P>=0&&P<this.items.length){Q=this.options[this.items[P]];if(this.deleteSelection(R)){this.setTextboxValue(M.text.apply(this,[Q]));this.refreshOptions(true)}R.preventDefault();return}}return N.apply(this,arguments)}})()});return d}));